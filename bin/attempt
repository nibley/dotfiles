#! /usr/bin/env zsh

autoload colors
colors

success="$fg_bold[green]✓$reset_color"
failure="$fg_bold[red]✗$reset_color"

result=$("$@" 2>&1)
exitcode=$?

(( $exitcode )) && (echo -n "$failure") || (echo -n "$success")

echo "  \"$@\""

if [[ -n $result ]]
then
	echo -n "     "
	(( $exitcode )) && echo -n "$fg[red]" || echo -n "$fg[green]"
	echo "$result"
	echo -n "$reset_color"
fi
