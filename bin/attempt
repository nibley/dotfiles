#! /usr/bin/env zsh

autoload colors
colors

success="$fg_bold[green]✓$reset_color"
failure="$fg_bold[red]✗$reset_color"

if result=$("$@" 2>&1)
then
	echo "$success  \"$@\""
	clean_exit=1
else
	echo "$failure  \"$@\""
fi

if [[ -n $result ]]
then
	echo -n "     "

	if (( $clean_exit ))
	then
		echo -n "$fg[green]"
	else
		echo -n "$fg[red]"
	fi

	echo "$result"
fi

echo -n "$reset_color"