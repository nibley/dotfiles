#! /usr/bin/env zsh

autoload colors
colors

success="$fg_bold[green]✓$reset_color"
failure="$fg_bold[red]✗$reset_color"

if result=$("$@" 2>&1)
then
	echo -n "$success"
	clean_exit=1
else
	echo -n "$failure"
fi
echo "  \"$@\""

if [[ -n $result ]]
then
	echo -n "     "
	(( $clean_exit )) && echo -n "$fg[green]" || echo -n "$fg[red]"
	echo "$result"
fi

echo -n "$reset_color"